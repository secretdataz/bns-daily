!function(e,t,i){"use strict";function o(i,o){var a=this;a.$el=e(i),a.$els=[],a.el=i,a.id=n++,a.heights=[],a.$window=e(t),a.$document=e(document),a.$el.bind("destroyed",e.proxy(a.teardown,a)),a.$clonedHeader=null,a.$originalHeader=null,a.isSticky=!1,a.hasBeenSticky=!1,a.leftOffset=null,a.topOffset=null,a.resetHeights=function(){a.$el.each(function(e,t){a.heights[e]={table:null,cHeader:null}})},a.delayedReset=e.noop,a.init=function(){a.$el.each(function(t,i){var o=e(this);a.$els[t]=o,o.css("padding",0),a.$originalHeader=e("thead:first",this),a.$clonedHeader=a.$originalHeader.clone(),o.trigger("clonedHeader."+s,[a.$clonedHeader]),a.$clonedHeader.addClass("tableFloatingHeader"),a.$clonedHeader.css("display","none"),a.$originalHeader.addClass("tableFloatingHeaderOriginal"),a.$originalHeader.after(a.$clonedHeader),a.$printStyle=e('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{position:static !important;}</style>'),e("head").append(a.$printStyle)}),a.setOptions(o),a.updateWidth(),a.toggleHeaders({type:"init"}),a.bind(),a.options.cacheHeights&&a.options.flushHeightAfter&&setTimeout(a.resetHeights,a.options.flushHeightAfter),a.options.cacheHeights&&a.options.flushHeightEvery&&(a.delayedReset=function(e,t){var i=0;return function(){if(i)return!1;var o=e();return i=setTimeout(function(){i=0},t),o}}(a.resetHeights,a.options.flushHeightEvery))},a.destroy=function(){a.$el.unbind("destroyed",a.teardown),a.teardown()},a.teardown=function(){a.isSticky&&a.$originalHeader.css("position","static"),e.removeData(a.el,"plugin_"+s),a.unbind(),a.$clonedHeader.remove(),a.$originalHeader.removeClass("tableFloatingHeaderOriginal"),a.$originalHeader.css("visibility","visible"),a.$printStyle.remove(),a.el=null,a.$el=null},a.bind=function(){a.$scrollableArea.on("scroll."+s,a.toggleHeaders),a.isWindowScrolling||(a.$window.on("scroll."+s+a.id,a.setPositionValues),a.$window.on("resize."+s+a.id,a.toggleHeaders)),a.$scrollableArea.on("resize."+s,a.toggleHeaders),a.$scrollableArea.on("resize."+s,a.updateWidth)},a.unbind=function(){a.$scrollableArea.off("."+s,a.toggleHeaders),a.isWindowScrolling||(a.$window.off("."+s+a.id,a.setPositionValues),a.$window.off("."+s+a.id,a.toggleHeaders)),a.$scrollableArea.off("."+s,a.updateWidth)},a.getCached=function(e,t,i,o){return a[t+"s"][i][o]?a[t+"s"][i][o]:a[t+"s"][i][o]=e[t]()},a.toggleHeaders=function(t){"scroll"==t.type?a.delayedReset():a.resetHeights(),a.$el&&a.$el.each(function(i,o){var s,n=a.$els[i],l=a.isWindowScrolling?isNaN(a.options.fixedOffset)?a.options.fixedOffset.outerHeight():a.options.fixedOffset:a.$scrollableArea.offset().top+(isNaN(a.options.fixedOffset)?0:a.options.fixedOffset),d=n.offset(),r=a.$scrollableArea.scrollTop()+l,c=a.$scrollableArea.scrollLeft(),f=a.isWindowScrolling?r>d.top:l>d.top,h=(a.isWindowScrolling?r:0)<d.top+(a.options.cacheHeights&&t?a.getCached(n,"height",i,"table"):n.height())-(a.options.cacheHeights&&t?a.getCached(a.$clonedHeader,"height",i,"cHeader"):a.$clonedHeader.height())-(a.isWindowScrolling?0:l);if(f&&h){s=d.left-c+a.options.leftOffset;var g=!a.options.setStylesOnce||!a.isSticky||s!=a.leftOffset;g&&(a.$originalHeader.css({position:"fixed","margin-top":0,left:s,"z-index":3}),a.leftOffset=s,a.topOffset=l,a.$clonedHeader.css("display","")),a.isSticky||(a.isSticky=!0,a.updateWidth()),g&&a.setPositionValues()}else a.isSticky&&(a.$originalHeader.css("position","static"),a.$clonedHeader.css("display","none"),a.isSticky=!1,a.resetWidth(e("td,th",a.$clonedHeader),e("td,th",a.$originalHeader)))})},a.setPositionValues=function(){var e=a.$window.scrollTop(),t=a.$window.scrollLeft();!a.isSticky||0>e||e+a.$window.height()>a.$document.height()||0>t||t+a.$window.width()>a.$document.width()||a.$originalHeader.css({top:a.topOffset-(a.isWindowScrolling?0:e),left:a.leftOffset-(a.isWindowScrolling?0:t)})},a.updateWidth=function(){if(a.isSticky){a.$originalHeaderCells||(a.$originalHeaderCells=e("th,td",a.$originalHeader)),a.$clonedHeaderCells||(a.$clonedHeaderCells=e("th,td",a.$clonedHeader));var t=a.getWidth(a.$clonedHeaderCells);a.setWidth(t,a.$clonedHeaderCells,a.$originalHeaderCells),a.$originalHeader.css("width",a.$clonedHeader.width())}},a.getWidth=function(i){var o=[];return i.each(function(i){var s,n=e(this);if("border-box"===n.css("box-sizing"))s=n.outerWidth();else{var l=e("th",a.$originalHeader);if("collapse"===l.css("border-collapse"))if(t.getComputedStyle)s=parseFloat(t.getComputedStyle(this,null).width);else{var d=parseFloat(n.css("padding-left")),r=parseFloat(n.css("padding-right")),c=parseFloat(n.css("border-width"));s=n.outerWidth()-d-r-c}else s=n.width()}o[i]=s}),o},a.setWidth=function(e,t,i){t.each(function(t){var o=e[t];i.eq(t).css({"min-width":o,"max-width":o})})},a.resetWidth=function(t,i){t.each(function(t){var o=e(this);i.eq(t).css({"min-width":o.css("min-width"),"max-width":o.css("max-width")})})},a.setOptions=function(i){a.options=e.extend({},l,i),a.$scrollableArea=e(a.options.scrollableArea),a.isWindowScrolling=a.$scrollableArea[0]===t},a.updateOptions=function(e){a.setOptions(e),a.unbind(),a.bind(),a.updateWidth(),a.toggleHeaders({type:"update"})},a.init()}var s="stickyTableHeaders",n=0,l={fixedOffset:0,leftOffset:0,setStylesOnce:!0,cacheHeights:!0,flushHeightAfter:0,flushHeightEvery:5e3,scrollableArea:t};e.fn[s]=function(t){return this.each(function(){var i=e.data(this,"plugin_"+s);i?"string"==typeof t?i[t].apply(i):i.updateOptions(t):"destroy"!==t&&e.data(this,"plugin_"+s,new o(this,t))})}}(jQuery,window);